<a
  href="{href}"
  target="{target}"
  class="{className}"
  on:click="{handleClick}"
>
  <slot></slot>
</a>

<script>
import { createLocation } from 'history';
import { getHistory, isModifiedEvent } from './index.js';

export let to = '#';
export let replace = false;
export let target = '';
export let className = '';

const history = getHistory();
let href;

$: href = history.createHref(typeof to === 'string' ? createLocation(to, null, null, history.location) : to);


function handleClick(event) {
  // Ignore everything but left clicks, let browser handle
  // "target=_blank" etc., ignore clicks with modifier keys
  if (event.button !== 0 || target !== '' || isModifiedEvent(event)) {
    return;
  }

  event.preventDefault();

  if (replace) {
    history.replace(to);
  } else {
    history.push(to);
  }
}
</script>
